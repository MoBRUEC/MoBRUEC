<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>CDMP Associate Exam Simulator by Mohammed Brueckner</title>
    
    <!-- SEO & Metadata -->
    <meta name="description" content="Free, high-fidelity practice exam for the DAMA CDMP Associate certification. Features 250+ annotated questions, weighted exam simulation, and instant feedback. Created by Mohammed Brueckner.">
    <meta name="keywords" content="CDMP, DAMA, DMBOK2, Data Management, Data Governance, Data Modeling, Exam Simulator, Certification, Practice Test, Mohammed Brueckner">
    <meta name="author" content="Mohammed Brueckner">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mohammed-brueckner.com/cdmp-exam-simulator/">
    <meta property="og:title" content="CDMP Associate Exam Simulator">
    <meta property="og:description" content="Master the DMBOK2 with this realistic 100-question exam simulator. Weighted categories, detailed explanations, and performance tracking.">
    <meta property="og:image" content="https://mohammed-brueckner.com/cdmp-exam-simulator/ralph-dama.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mohammed-brueckner.com/cdmp-exam-simulator/">
    <meta property="twitter:title" content="CDMP Exam Simulator by Mohammed Brueckner">
    <meta property="twitter:description" content="Prepare for your Data Management certification with realistic drills and exam simulations.">
    <meta property="twitter:image" content="https://mohammed-brueckner.com/cdmp-exam-simulator/ralph-dama.jpg">

    <!-- Structured Data (JSON-LD) for LLMs and Search Engines -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "CDMP Associate Exam Simulator",
      "operatingSystem": "Web Browser",
      "applicationCategory": "EducationalApplication",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "Mohammed Brueckner",
        "url": "https://mohammed-brueckner.com"
      },
      "description": "A comprehensive practice tool for the DAMA Certified Data Management Professional (CDMP) Associate exam, covering all DMBOK2 knowledge areas."
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Libraries via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              mono: ['ui-monospace', 'monospace'],
            },
            colors: {
              slate: {
                950: '#020617', // Custom dark bg
                900: '#0f172a',
                800: '#1e293b',
              }
            },
            animation: {
              'pulse-green': 'pulseGreen 0.6s ease-in-out',
              'shake': 'shake 0.4s cubic-bezier(.36,.07,.19,.97) both',
              'float': 'float 20s infinite linear',
              'fade-in': 'fadeIn 0.3s ease-out',
            },
            keyframes: {
              pulseGreen: {
                '0%': { boxShadow: '0 0 0 0 rgba(34, 197, 94, 0.4)' },
                '70%': { boxShadow: '0 0 0 8px rgba(34, 197, 94, 0)' },
                '100%': { boxShadow: '0 0 0 0 rgba(34, 197, 94, 0)' },
              },
              shake: {
                '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
              },
              float: {
                 '0%': { transform: 'translateY(100vh) scale(0.5)', opacity: '0' },
                 '50%': { opacity: '0.2' },
                 '100%': { transform: 'translateY(-10vh) scale(1.5)', opacity: '0' }
              },
              fadeIn: {
                '0%': { opacity: '0', transform: 'translateY(10px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' }
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #020617;
        color: #f8fafc;
        min-height: -webkit-fill-available;
        overscroll-behavior: none;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: #0f172a; }
      ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
      ::-webkit-scrollbar-thumb:hover { background: #475569; }
      
      /* Custom Radio/Checkbox Styles */
      .option-input:checked + .option-label {
        border-color: #3b82f6;
        background-color: rgba(59, 130, 246, 0.1);
      }
      .option-input:disabled + .option-label {
        opacity: 0.6;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      // --- APPLICATION ---
      const { useState, useEffect, useRef } = React;

      // Category Mapping for UI
      const categoryMap = {
        governance: "Governance",
        architecture: "Architecture",
        modeling: "Modeling",
        quality: "Data Quality",
        security: "Security",
        mdm: "Master Data",
        dwbi: "DW & BI",
        metadata: "Metadata",
        content: "Doc & Content",
        ethics: "Data Ethics",
        science: "Data Science",
        integration: "Integration" // Added integration category mapping
      };

      // Exam Weights (approximate)
      const EXAM_WEIGHTS = {
        governance: 11,
        modeling: 11,
        quality: 11,
        metadata: 11,
        mdm: 10,
        dwbi: 10,
        architecture: 6,
        security: 6,
        content: 6,
        science: 6,
        ethics: 2
      };

      const IconCheck = () => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-5 h-5"><polyline points="20 6 9 17 4 12"></polyline></svg>
      );
      
      const IconX = () => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-5 h-5"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      );

      const IconBrain = () => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM12 22c-5.52 0-10-4.48-10-10S6.48 2 12 2s10 4.48 10 10-4.48 10-10 10z"/><path d="M12 6c-3.31 0-6 2.69-6 6 0 1.5.54 2.87 1.43 3.94l1.42-1.42c-.56-.67-.85-1.52-.85-2.52 0-2.21 1.79-4 4-4s4 1.79 4 4c0 1-.29 1.85-.85 2.52l1.42 1.42C17.46 14.87 18 13.5 18 12c0-3.31-2.69-6-6-6z"/></svg>
      );

      function shuffle(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
          randomIndex = Math.floor(Math.random() * currentIndex);
          currentIndex--;
          [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
      }

      function App() {
        const [mode, setMode] = useState('loading'); // loading, home, quiz, result
        const [examMode, setExamMode] = useState(false); // false = drill/instant, true = exam
        const [questionBank, setQuestionBank] = useState([]);
        const [questions, setQuestions] = useState([]);
        const [currentIndex, setCurrentIndex] = useState(0);
        const [score, setScore] = useState(0);
        
        // UI State
        const [showCategories, setShowCategories] = useState(false);
        
        // Question State
        const [selectedIndices, setSelectedIndices] = useState([]);
        const [isLocked, setIsLocked] = useState(false);
        const [isCorrect, setIsCorrect] = useState(false);
        const [shake, setShake] = useState(false);

        useEffect(() => {
          const loadQuestions = async () => {
            try {
              const files = ['q1.json', 'q2.json', 'q3.json', 'q4.json', 'q5.json', 'q6.json', 'q7.json'];
              const allQuestions = [];
              for (const file of files) {
                const response = await fetch(`./${file}`);
                if (response.ok) {
                  const data = await response.json();
                  allQuestions.push(...data);
                }
              }
              setQuestionBank(allQuestions);
              setMode('home');
            } catch (error) {
              console.error("Failed to load questions:", error);
              setMode('error');
            }
          };
          loadQuestions();
        }, []);

        // Calculate counts for categories
        const getCategoryCounts = () => {
          const counts = {};
          questionBank.forEach(q => {
            counts[q.cat] = (counts[q.cat] || 0) + 1;
          });
          return counts;
        };
        const catCounts = getCategoryCounts();

        // Updated Randomizer Logic
        const randomizeOptions = (q) => {
          // Identify the correct answer text before shuffling
          const correctAnswerText = q.options[q.a];
          
          // Create a shallow copy and shuffle it
          const shuffledOptions = shuffle([...q.options]);
          
          // Find the new index of the correct answer
          const newAnswerIndex = shuffledOptions.indexOf(correctAnswerText);
          
          return {
            ...q,
            options: shuffledOptions,
            a: newAnswerIndex
          };
        };

        const generateWeightedExam = () => {
           // UPDATED: CDMP Exam is 100 Questions
           const targetTotal = 100;
           let selectedQuestions = [];
           
           // Group questions by category
           const questionsByCat = {};
           questionBank.forEach(q => {
             if (!questionsByCat[q.cat]) questionsByCat[q.cat] = [];
             questionsByCat[q.cat].push(q);
           });

           // Select based on weights
           Object.keys(EXAM_WEIGHTS).forEach(cat => {
              const weight = EXAM_WEIGHTS[cat] || 5;
              const targetCount = Math.round((weight / 100) * targetTotal);
              const pool = questionsByCat[cat] || [];
              const shuffledPool = shuffle([...pool]);
              const selected = shuffledPool.slice(0, targetCount);
              selectedQuestions = [...selectedQuestions, ...selected];
           });

           // If we are short, fill from remaining pool
           const currentIds = new Set(selectedQuestions.map(q => q.id));
           let remainingPool = questionBank.filter(q => !currentIds.has(q.id));
           
           while (selectedQuestions.length < targetTotal && remainingPool.length > 0) {
              const randomIndex = Math.floor(Math.random() * remainingPool.length);
              selectedQuestions.push(remainingPool[randomIndex]);
              remainingPool.splice(randomIndex, 1);
           }
           
           if (selectedQuestions.length > targetTotal) {
             selectedQuestions = selectedQuestions.slice(0, targetTotal);
           }

           return shuffle(selectedQuestions);
        };

        const startQuiz = (isExam, category = null) => {
          setExamMode(isExam);
          
          let finalQuestions = [];

          if (isExam) {
             finalQuestions = generateWeightedExam();
          } else {
             // Drill Mode
             let pool = [...questionBank];
             if (category) {
               pool = pool.filter(q => q.cat === category);
             }
             finalQuestions = shuffle(pool);
          }

          // Apply Runtime Option Randomization
          // This ensures the correct answer isn't always "B" (index 1)
          const randomizedQuestions = finalQuestions.map(randomizeOptions);

          setQuestions(randomizedQuestions);
          setCurrentIndex(0);
          setScore(0);
          resetQuestionState();
          setMode('quiz');
        };

        const resetQuestionState = () => {
          setSelectedIndices([]);
          setIsLocked(false);
          setIsCorrect(false);
          setShake(false);
        };

        const handleOptionSelect = (index) => {
          if (isLocked) return;
          // UPDATED: Strict Single Choice logic
          setSelectedIndices([index]);
        };

        const checkAnswer = () => {
          const currentQ = questions[currentIndex];
          // UPDATED: Single answer logic
          const correctAns = currentQ.a;
          const selected = selectedIndices[0];
          
          const correct = selected === correctAns;
          
          if (correct) {
            setScore(prev => prev + 1);
            setIsCorrect(true);
          } else {
            setIsCorrect(false);
            setShake(true);
            setTimeout(() => setShake(false), 500);
          }
          
          setIsLocked(true);
        };

        const handleNext = () => {
          if (currentIndex < questions.length - 1) {
            setCurrentIndex(prev => prev + 1);
            resetQuestionState();
          } else {
            setMode('result');
          }
        };

        if (mode === 'loading') {
          return (
            <div className="min-h-screen flex items-center justify-center bg-slate-950 text-slate-50">
              <div className="animate-pulse flex flex-col items-center">
                <IconBrain />
                <p className="mt-4 text-slate-400">Loading Question Database...</p>
              </div>
            </div>
          );
        }

        if (mode === 'error') {
          return (
            <div className="min-h-screen flex items-center justify-center bg-slate-950 text-slate-50">
              <div className="flex flex-col items-center">
                <IconX />
                <p className="mt-4 text-red-400">Failed to load questions. Please refresh the page.</p>
              </div>
            </div>
          );
        }
        
        if (mode === 'home') {
          return (
            <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#020617] to-black text-slate-50 relative overflow-y-auto">
              <div className="absolute inset-0 overflow-hidden pointer-events-none">
                <div className="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[100px] animate-float"></div>
                <div className="absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-purple-600/10 rounded-full blur-[100px] animate-float" style={{animationDelay: '2s'}}></div>
              </div>
              
              <div className="relative z-10 max-w-md w-full text-center space-y-6 pb-24">
                
                {/* Brand & Title */}
                <div className="space-y-2">
                  <div className="inline-flex items-center justify-center p-4 bg-slate-900/80 rounded-2xl mb-4 ring-1 ring-white/10 shadow-2xl shadow-blue-500/10 backdrop-blur-none">
                    <IconBrain />
                  </div>
                  <h1 className="text-5xl font-black tracking-tighter bg-clip-text text-transparent bg-gradient-to-br from-white via-blue-100 to-blue-400 drop-shadow-sm">
                    CDMP Simulator
                  </h1>
                  <p className="text-slate-400 text-lg font-medium">Master the DMBOK2 Fundamentals</p>
                </div>
                
                {/* Splash Image */}
                <div className="w-full max-w-[280px] mx-auto rounded-2xl overflow-hidden shadow-2xl shadow-blue-900/20 border border-white/10 group hover:scale-[1.02] transition-transform duration-500 bg-slate-900">
                   <div className="absolute inset-0 bg-gradient-to-t from-slate-950/50 to-transparent z-10 pointer-events-none"></div>
                   <img 
                     src="https://mohammed-brueckner.com/cdmp-exam-simulator/ralph-dama.jpg" 
                     alt="Exam Day Visualization" 
                     className="w-full h-auto object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-500"
                   />
                </div>

                {/* Controls */}
                <div className="grid gap-3 pt-4">
                  {!showCategories ? (
                    <>
                      <button 
                        onClick={() => startQuiz(false)}
                        className="group relative w-full p-4 bg-slate-900/90 border border-white/5 hover:border-blue-500/50 rounded-2xl transition-colors duration-200 hover:shadow-lg hover:shadow-blue-500/10 text-left flex items-center overflow-hidden"
                      >
                        <div className="absolute inset-0 bg-gradient-to-r from-blue-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"></div>
                        <div className="flex-1 relative z-10 pointer-events-none">
                          <div className="font-bold text-lg text-slate-100 group-hover:text-blue-400 transition-colors">Quick Drill</div>
                          <div className="text-sm text-slate-500 group-hover:text-slate-400">Practice with all {questionBank.length} questions</div>
                        </div>
                        <div className="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-blue-500/20 group-hover:text-blue-400 transition-all border border-white/5 group-hover:border-blue-500/30 relative z-10 pointer-events-none">
                          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        </div>
                      </button>

                      <button 
                        onClick={() => setShowCategories(true)}
                        className="group relative w-full p-4 bg-slate-900/90 border border-white/5 hover:border-cyan-500/50 rounded-2xl transition-colors duration-200 hover:shadow-lg hover:shadow-cyan-500/10 text-left flex items-center overflow-hidden"
                      >
                         <div className="absolute inset-0 bg-gradient-to-r from-cyan-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"></div>
                        <div className="flex-1 relative z-10 pointer-events-none">
                          <div className="font-bold text-lg text-slate-100 group-hover:text-cyan-400 transition-colors">Practice by Topic</div>
                          <div className="text-sm text-slate-500 group-hover:text-slate-400">Select specific Knowledge Areas</div>
                        </div>
                        <div className="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-cyan-500/20 group-hover:text-cyan-400 transition-all border border-white/5 group-hover:border-cyan-500/30 relative z-10 pointer-events-none">
                          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h7"></path></svg>
                        </div>
                      </button>

                      <button 
                        onClick={() => startQuiz(true)}
                        className="group relative w-full p-4 bg-slate-900/90 border border-purple-500/20 hover:border-purple-500/50 rounded-2xl transition-colors duration-200 hover:shadow-lg hover:shadow-purple-500/10 text-left flex items-center overflow-hidden"
                      >
                         <div className="absolute inset-0 bg-gradient-to-r from-purple-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"></div>
                         <div className="flex-1 relative z-10 pointer-events-none">
                          <div className="font-bold text-lg text-slate-100 group-hover:text-purple-400 transition-colors">Start Exam Mode</div>
                          <div className="text-sm text-slate-500 group-hover:text-slate-400">100 weighted questions • Realistic mix</div>
                        </div>
                        <div className="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-purple-500/20 group-hover:text-purple-400 transition-all border border-white/5 group-hover:border-purple-500/30 relative z-10 pointer-events-none">
                          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </div>
                      </button>
                    </>
                  ) : (
                    <div className="space-y-3 animate-fade-in">
                      <button 
                        onClick={() => setShowCategories(false)}
                        className="w-full p-2 text-sm text-slate-400 hover:text-white flex items-center justify-center gap-2 transition-colors mb-2 bg-transparent"
                      >
                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                        Back to Menu
                      </button>
                      
                      <div className="grid grid-cols-2 gap-3 max-h-[50vh] overflow-y-auto pr-1 custom-scrollbar">
                        {Object.entries(categoryMap).map(([key, label]) => (
                           <button 
                             key={key}
                             onClick={() => startQuiz(false, key)}
                             className="p-3 bg-slate-800/90 border border-white/5 hover:border-blue-500/50 hover:bg-slate-800 rounded-xl text-left transition-colors duration-200 group"
                           >
                              <div className="text-sm font-semibold text-slate-200 group-hover:text-blue-400 truncate">{label}</div>
                              <div className="text-xs text-slate-500">{catCounts[key] || 0} questions</div>
                           </button>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
                
                <div className="text-xs text-slate-600 pt-2 font-medium tracking-wide">
                  {questionBank.length} QUESTIONS LOADED • V4.0.0
                </div>
              </div>

              {/* Persistent Footer */}
              <footer className="absolute bottom-0 w-full p-4 border-t border-white/5 bg-slate-950/95 text-center z-10 backdrop-blur-none">
                <div className="flex items-center justify-center gap-6 text-sm font-medium text-slate-500">
                  <a href="https://mohammed-brueckner.com" target="_blank" rel="noopener noreferrer" className="hover:text-blue-400 transition-colors flex items-center gap-2">
                    <span>© Mohammed Brueckner</span>
                  </a>
                  <span className="text-slate-700/50">|</span>
                  <a href="https://mohammed-brueckner.com/publications" target="_blank" rel="noopener noreferrer" className="hover:text-blue-400 transition-colors">
                    My Publications
                  </a>
                </div>
              </footer>
            </div>
          );
        }

        if (mode === 'result') {
           const pct = Math.round((score / questions.length) * 100);
           return (
             <div className="min-h-screen flex items-center justify-center p-6 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#020617] to-black text-slate-50 relative">
               <div className="max-w-md w-full bg-slate-900 border border-white/10 rounded-3xl p-8 text-center shadow-2xl shadow-black/50 z-10 relative overflow-hidden">
                 
                 <h2 className="text-3xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-br from-white to-slate-400">Quiz Complete</h2>
                 <p className="text-slate-400 mb-8">Here is how you performed</p>
                 
                 <div className="relative inline-flex items-center justify-center w-32 h-32 mb-8">
                   <svg className="w-full h-full -rotate-90" viewBox="0 0 36 36">
                     <path className="text-slate-800" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" strokeWidth="4" />
                     <path className="text-blue-500 drop-shadow-[0_0_15px_rgba(59,130,246,0.5)] transition-all duration-1000 ease-out" strokeDasharray={`${pct}, 100`} d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" strokeWidth="4" />
                   </svg>
                   <div className="absolute text-4xl font-bold tracking-tight">{pct}%</div>
                 </div>
                 
                 <div className="grid grid-cols-2 gap-4 mb-8">
                   <div className="bg-slate-950/50 p-4 rounded-2xl border border-white/5">
                     <div className="text-slate-500 text-xs uppercase tracking-wider mb-1 font-semibold">Score</div>
                     <div className="text-2xl font-bold text-white">{score} / {questions.length}</div>
                   </div>
                   <div className="bg-slate-950/50 p-4 rounded-2xl border border-white/5">
                     <div className="text-slate-500 text-xs uppercase tracking-wider mb-1 font-semibold">Status</div>
                     <div className={`text-2xl font-bold ${pct >= 60 ? 'text-green-400' : 'text-red-400'}`}>
                       {pct >= 60 ? 'PASS' : 'FAIL'}
                     </div>
                   </div>
                 </div>
                 
                 <button onClick={() => setMode('home')} className="w-full py-4 bg-white hover:bg-slate-200 text-slate-950 font-bold rounded-2xl transition-all duration-300 shadow-xl shadow-white/5">
                   Back to Home
                 </button>
               </div>
               
               <footer className="absolute bottom-0 w-full p-4 border-t border-white/5 bg-slate-950/95 text-center z-10">
                <div className="flex items-center justify-center gap-6 text-sm font-medium text-slate-500">
                  <a href="https://mohammed-brueckner.com" target="_blank" rel="noopener noreferrer" className="hover:text-blue-400 transition-colors">
                    © Mohammed Brueckner
                  </a>
                  <span className="text-slate-700/50">|</span>
                  <a href="https://mohammed-brueckner.com/publications" target="_blank" rel="noopener noreferrer" className="hover:text-blue-400 transition-colors">
                    My Publications
                  </a>
                </div>
              </footer>
             </div>
           );
        }

        // --- QUIZ VIEW ---
        const q = questions[currentIndex];
        const progress = ((currentIndex + 1) / questions.length) * 100;
        
        return (
          <div className="min-h-screen flex flex-col bg-slate-950 text-slate-50 font-sans selection:bg-blue-500/30">
            {/* Header */}
            <header className="px-6 py-4 border-b border-white/5 flex justify-between items-center bg-slate-950/90 backdrop-blur-sm sticky top-0 z-20">
              <button onClick={() => setMode('home')} className="p-2 -ml-2 text-slate-400 hover:text-white transition-colors bg-white/5 hover:bg-white/10 rounded-lg">
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg>
              </button>
              <div className="font-mono text-sm font-medium text-slate-500 bg-slate-900 px-3 py-1 rounded-full border border-white/5">
                <span className="text-slate-200">{currentIndex + 1}</span> <span className="text-slate-600">/</span> {questions.length}
              </div>
            </header>
            
            {/* Progress Bar */}
            <div className="h-1 w-full bg-slate-900">
              <div className="h-full bg-gradient-to-r from-blue-600 to-indigo-500 shadow-[0_0_15px_rgba(59,130,246,0.6)] transition-all duration-500 ease-out" style={{width: `${progress}%`}}></div>
            </div>

            <main className="flex-1 w-full max-w-3xl mx-auto p-6 pb-40">
              {/* Question */}
              <div className="space-y-8 animate-fade-in">
                <div className="flex items-start gap-5">
                  <div className="mt-1.5 min-w-[28px] h-7 flex items-center justify-center rounded-lg bg-slate-800 text-xs font-mono font-bold text-slate-400 border border-white/10 shadow-sm">
                    {q.id}
                  </div>
                  <div className="space-y-3">
                    <div className="flex items-center gap-2">
                       <span className="text-xs font-bold text-blue-400 uppercase tracking-wider bg-blue-500/10 px-2 py-1 rounded border border-blue-500/20">{categoryMap[q.cat] || q.cat}</span>
                    </div>
                    <h2 className="text-xl md:text-2xl font-semibold leading-relaxed text-slate-100 tracking-tight">
                      {q.q}
                    </h2>
                  </div>
                </div>

                {/* Options */}
                <div className={`space-y-3 ${shake ? 'animate-shake' : ''}`}>
                  {q.options.map((opt, idx) => {
                    const isSelected = selectedIndices.includes(idx);
                    const isCorrectAnswer = idx === q.a;
                    
                    let statusClass = "border-white/5 bg-slate-900/60 hover:border-slate-500 hover:bg-slate-800";
                    let ringClass = "";
                    
                    if (isLocked) {
                       if (isCorrectAnswer) {
                         statusClass = "border-green-500/50 bg-green-500/10 shadow-[0_0_20px_rgba(34,197,94,0.1)]";
                       } else if (isSelected) {
                         statusClass = "border-red-500/50 bg-red-500/10 opacity-75";
                       } else {
                         statusClass = "border-white/5 opacity-40 grayscale";
                       }
                    } else if (isSelected) {
                      statusClass = "border-blue-500 bg-blue-500/10 shadow-[0_0_20px_rgba(59,130,246,0.15)]";
                      ringClass = "ring-1 ring-blue-500/50";
                    }

                    return (
                      <label 
                        key={idx}
                        className={`
                          relative group flex items-start p-5 rounded-2xl border-2 cursor-pointer transition-all duration-200
                          ${statusClass} ${ringClass}
                        `}
                      >
                         <input 
                           type="radio"
                           name="option"
                           className="sr-only"
                           disabled={isLocked}
                           checked={isSelected}
                           onChange={() => handleOptionSelect(idx)}
                         />
                         
                         <div className={`
                            mt-0.5 w-6 h-6 rounded-full flex items-center justify-center border-2 transition-all duration-200 shadow-sm
                            ${isSelected 
                              ? (isLocked 
                                  ? (isCorrectAnswer ? 'bg-green-500 border-green-500 text-slate-950 scale-110' : 'bg-red-500 border-red-500 text-slate-950 scale-110')
                                  : 'bg-blue-500 border-blue-500 text-white scale-110')
                              : 'border-slate-600 bg-slate-800/50 group-hover:border-slate-500'
                            }
                         `}>
                            {isSelected && (isLocked ? (isCorrectAnswer ? <IconCheck /> : <IconX />) : <div className="w-2.5 h-2.5 rounded-full bg-white"></div>)}
                            {isLocked && isCorrectAnswer && !isSelected && <div className="w-2.5 h-2.5 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,1)]"></div>}
                         </div>
                         
                         <div className="ml-4 text-base md:text-lg leading-snug text-slate-300 group-hover:text-slate-200 select-none">
                           {opt}
                         </div>
                      </label>
                    );
                  })}
                </div>

                {/* Explanation */}
                {isLocked && (
                  <div className="mt-8 pt-8 border-t border-white/5 animate-fade-in-up">
                     <div className={`p-6 rounded-2xl border ${isCorrect ? 'bg-green-950/30 border-green-500/30 shadow-[0_0_30px_rgba(34,197,94,0.1)]' : 'bg-red-950/30 border-red-500/30 shadow-[0_0_30px_rgba(239,68,68,0.1)]'}`}>
                        <div className="flex items-center gap-3 mb-3">
                          <div className={`w-8 h-8 rounded-full flex items-center justify-center ${isCorrect ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                             {isCorrect ? <IconCheck /> : <IconX />}
                          </div>
                          <span className={`text-lg font-bold ${isCorrect ? 'text-green-400' : 'text-red-400'}`}>
                            {isCorrect ? 'Correct Answer' : 'Incorrect'}
                          </span>
                        </div>
                        <p className="text-slate-300 leading-relaxed mb-6 text-lg">{q.expl}</p>
                        
                        {q.prep && (
                           <div className="mt-4 p-4 bg-slate-900/80 rounded-xl border border-white/10 text-sm shadow-inner">
                             <div className="flex items-center gap-2 mb-2">
                               <svg className="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                               <span className="text-blue-400 font-bold uppercase tracking-wider text-xs">Study Strategy</span>
                             </div>
                             <span className="text-slate-400 font-mono leading-relaxed block">{q.prep}</span>
                           </div>
                        )}
                        <div className="mt-3 text-xs text-slate-600 font-mono text-right uppercase tracking-wider">Source: {q.ref}</div>
                     </div>
                  </div>
                )}

              </div>
            </main>

            {/* Sticky Footer */}
            <div className="fixed bottom-0 left-0 right-0 p-4 bg-slate-950/95 backdrop-blur-none border-t border-white/5 z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]">
               <div className="max-w-2xl mx-auto">
                 {!isLocked ? (
                   <button 
                     onClick={checkAnswer}
                     disabled={selectedIndices.length === 0}
                     className="w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_25px_rgba(37,99,235,0.4)] transition-all active:scale-[0.98] tracking-wide"
                   >
                     Confirm Answer
                   </button>
                 ) : (
                   <button 
                     onClick={handleNext}
                     className="w-full py-4 bg-white hover:bg-slate-200 text-slate-950 font-bold rounded-xl shadow-[0_0_25px_rgba(255,255,255,0.1)] transition-all active:scale-[0.98] tracking-wide"
                   >
                     {currentIndex < questions.length - 1 ? 'Next Question' : 'Finish Quiz'}
                   </button>
                 )}
               </div>
            </div>
          </div>
        );
      }

      // --- MOUNT ---
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
